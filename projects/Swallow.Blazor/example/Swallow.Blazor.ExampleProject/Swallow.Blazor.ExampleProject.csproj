<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>disable</Nullable>

    <IsPackable>false</IsPackable>

    <_GeneratorAssemblyName>Swallow.Blazor.StaticAssetPaths</_GeneratorAssemblyName>
    <_TaskAssemblyName>Swallow.Blazor.AdvancedStyleIsolation</_TaskAssemblyName>
    <_LocalTaskAssembly>$(MSBuildThisFileDirectory)../../src/$(_TaskAssemblyName)/bin/$(Configuration)/netstandard2.0/$(_TaskAssemblyName).dll</_LocalTaskAssembly>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="../../src/$(_GeneratorAssemblyName)/$(_GeneratorAssemblyName).csproj" OutputItemType="Analyzer" PrivateAssets="All" />
  </ItemGroup>

  <!-- Explicitly import the task assembly (since the past would be wrong if imported by the .props -->
  <UsingTask TaskName="ReplaceCssScope" AssemblyFile="$(_LocalTaskAssembly)" />
  <UsingTask TaskName="AppendCssScope" AssemblyFile="$(_LocalTaskAssembly)" />

  <!-- Imitate importing the task and generator as NuGet package -->
  <Import Project="$(MSBuildThisFileDirectory)../../src/$(_TaskAssemblyName)/build/$(_TaskAssemblyName).props" />
  <Import Project="$(MSBuildThisFileDirectory)../../src/$(_TaskAssemblyName)/build/$(_TaskAssemblyName).targets" />
  <Import Project="$(MSBuildThisFileDirectory)../../src/$(_GeneratorAssemblyName)/build/$(_GeneratorAssemblyName).props" />
  <Import Project="$(MSBuildThisFileDirectory)../../src/$(_GeneratorAssemblyName)/build/$(_GeneratorAssemblyName).targets" />

  <ItemGroup>
    <AppendStyles Include="DerivedAppend.razor" From="Base.razor" />
    <AppendStyles Include="DerivedAppendNoStyle.razor" From="Base.razor" />

    <InheritStyles Include="DerivedInherit.razor" From="Base.razor" />
    <InheritStyles Include="DerivedInheritNoStyle.razor" From="Base.razor" />
  </ItemGroup>

</Project>
