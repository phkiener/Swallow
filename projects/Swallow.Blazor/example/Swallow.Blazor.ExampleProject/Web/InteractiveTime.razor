@using Swallow.Blazor.Reactive.Abstractions
@using Swallow.Blazor.Reactive.Abstractions.State
@attribute [StatefulReactiveComponent]
@inject IReactiveStateHandler StateHandler

<div>
    <span>It's currently @DateTime.Now.ToString("O") after @refreshCount refreshes</span>
    <button type="button" hx-post="/_rx/Swallow.Blazor.ExampleProject/Swallow.Blazor.ExampleProject.Web.InteractiveTime">Refresh</button>
</div>

@code
{
    private int refreshCount = 0;

    [CascadingParameter]
    public required IReactiveIsland Island { get; set; }

    protected override void OnInitialized()
    {
        StateHandler.Register(Island, nameof(refreshCount), () => refreshCount);
        refreshCount += 1;
    }
}
